(function(e){var t=function(e){function n(){var e=$(t.root);r(e);s(e);o(e);u(e)}function r(e){e.on("click","[data-act]",function(e){i("click",e)});e.on("mousedown","[data-act]",function(e){i("mousedown",e)});e.on("mouseup","[data-act]",function(e){i("mouseup",e)});e.on("dblclick","[data-act]",function(e){i("dblclick",e)});e.on("change","[data-act]",function(e){i("change",e)});e.on("keydown","[data-act]",function(e){i("keydown",e)});e.on("keyup","[data-act]",function(e){i("keyup",e)})}function i(e,n){var r=n.currentTarget;var i=a($(r).data("act"));var s=i.func,o=i.key,u=i.type?i.type:"click";if(u==e){if(!o){if(t.act[s]){t.act[s].call(t,n)}else{throw new Error("VOJS_ACT_ERR: "+s+" is not defined")}}else{if(t.act[s]){t.act[s].call(t,n,o)}else{throw new Error("VOJS_ACT_ERR: "+s+" is not defined")}}}}function s(e){var t=[],n=[];var r=e.find("[data-bind]");r.each(function(e){var i=$(this),s=i.data("bind"),o=a(s);if(!o.key){n.push({name:o.func,elem:this})}else{t.push({func:o.func,key:o.key,data:i.get(0)})}if(r.size()==e+1){c(t);l(n)}})}function o(e){var n=[];var r=e.find("[data-tag],[id]");r.each(function(e){var i=$(this),s=false,o=i.data("tag"),u=a(o);if(u.type){throw new Error("VOJS_TAG_ERR: invalid expression")}if(typeof o!="string"){o=this.id;s=true}if(o.indexOf(":")==-1||s){t.tag[o]=i.get(0)}else{n.push({func:u.func,key:u.key,data:i.get(0)})}if(r.size()==e+1){for(var e in n){if(!t.tag[n[e].func]){t.tag[n[e].func]=new Object}t.tag[n[e].func][n[e].key]=n[e].data}}})}function u(e){$("body").find("script[type*=template]").each(function(n){var r=$(this).data("tpl"),i="body",u="";if(!r)return;if(r.indexOf(":")==-1){u=r}else{var a=r.split(":"),i="#"+a[0],u=a[1]}var f=$(i).find("[data-tpl="+u+"]"),l=$(this).html();var c=function(){var n=f,r=arguments[0];if(typeof r=="string"){n=e.find("#"+arguments[0]);r=arguments[1]?arguments[1]:{};u=arguments[0]}n.html(_.template(l,r));s(n);o(n);if(t.tag[u]){t.tag[u]=n.get(0)}return n.get(0)};t.tpl[u]=c})}function a(e){var t=null,n=null,r=null;if(e){if(e.indexOf("#")!=-1){var i=e.split("#");r=i[1],e=i[0]}if(e.indexOf(":")!=-1){var i=e.split(":");t=i[1],n=i[0]}else{n=e}}return{key:t,func:n,type:r}}function f(e,t){var n=a($(e).data("bind")),r=n.type;if(!r){if(e.value==undefined)$(e).html(t);else $(e).val(t)}else{if(r.indexOf(".")!=-1){var i=r.split(".");if(i[0]=="css"){$(e).css(i[1],t)}else if(i[0]=="attr"){$(e).attr(i[1],t)}}else{$(e).css(r,t)}}}function l(e){var n=new Object;for(var r in e){var i=e[r];if(!n[i.name])n[i.name]=[];n[i.name].push(i.elem)}for(var s in n){(function(e){t.bindMultiProc=function(t){var r=n[e];for(var i in r){var s=r[i];f(s,t)}return r.length>1?r:r[0]}})(s);t.bind[s]=t.bindMultiProc}}function c(e){for(var n in e){var r=e[n].func;(function(n){t.funcMultiProc=function(t,r){var s=i(e,n,t);f(s,r);return s}})(r);function i(e,t,n){for(var r in e){var i=e[r];if(i.func==t&&i.key==n){return i.data}}}t.bind[r]=t.funcMultiProc}}function h(e,t,n){function s(e){if(e.value==undefined)return $(e).html();else return $(e).val()}function o(t){var n=t.cmd,r=t.elem;if(e=="bind"){if(!n.type){return s(r)}else{if(n.type.indexOf(".")!=-1){var i=n.type.split(".");if(i[0]=="css"){return $(r).css(i[1])}else if(i[1]=="attr"){return $(r).attr(i[1])}}else{return $(r).css(n.type)}}}else{return s(r)}}var r="[data-"+e+"]"+(e=="tag"?",#"+t:""),i=[];$(r).each(function(n){var r=$(this).data(e);if(e=="tag"&&!r)r=this.id;var s=a(r);if(t==s.func){i.push({cmd:s,elem:this})}});return function(e){if(e.length==1&&!e[0].cmd.key){if(n)return e[0].elem;else return o(e[0])}else{var r=new Object,i=0;for(var s in e){if(typeof e[s]!="function"){var u=e[s].cmd;if(u.key){t=u.key}else{t=i;i++}if(n)r[t]=e[s].elem;else r[t]=o(e[s])}}return r}}(i)}var t=this;t.root=e?$("#"+e).get(0):$("body").get(0),t.act={},t.bind={},t.tag={},t.tpl={};t.bind.get=function(e){return h("bind",e,true)};t.tag.get=function(e){return h("tag",e,true)};t.act.get=function(e){return h("act",e,true)};t.bind.val=function(e){return h("bind",e,false)};t.tag.val=function(e){return h("tag",e,false)};t.act.val=function(e){return h("act",e,false)};n()};var n=function(e,t,n){if(typeof e!="object")throw new Error("VOJS_CRITICAL_ERR: is not an object");if(typeof t!="string")throw new Error("VOJS_CRITICAL_ERR: is not an template id");if(typeof n!="string")throw new Error("VOJS_CRITICAL_ERR: is not an target id");var r=$("#"+t);if(r.attr("type")!="text/template")throw new Error("VOJS_CRITICAL_ERR: is not a template tag");var i="_"+(new Date).getTime()+"_",s=_.template(r.html(),{viewId:i}),o=n?$("#"+n):$("body");if(s.indexOf("<script")!=-1)throw new Error("VOJS_CRITICAL_ERR: script tag should not be used");if(o.size()==0)throw new Error("VOJS_CRITICAL_ERR: the target does not exist");return{viewId:i,targetSel:o,tplHtml:s}};t.applyTo=function(e,n){if(typeof e!="object")throw new Error("VOJS_CRITICAL_ERR: is not an object");_.extend(e,new t(n))};t.appendTo=function(e,r,i){var s=n(e,r,i);s.targetSel.append(s.tplHtml);t.applyTo(e,s.viewId)};t.prependTo=function(e,r,i){var s=n(e,r,i);s.targetSel.prepend(s.tplHtml);t.applyTo(e,s.viewId)};t.includeTpl=function(){var e=t.includePath?t.includePath:"",n=t.includeExt?t.includeExt:"tpl",r=arguments.length;if(typeof arguments[r-1]=="object"){var i=arguments[r-1];e=i.path?i.path:e;n=i.ext?i.ext:n}for(var s in arguments){var o=arguments[s],u="",a="body";if(typeof o=="string"){if(o.indexOf(":")!=-1){var f=o.split(":"),a="#"+f[0],u=e+"/"+f[1]+"."+n}else{u=e+"/"+o+"."+n}$.ajax({url:u,method:"GET",async:false,success:function(e){$(a).append(e)}})}}};e.vo=t})(window)