(function(e){var t={path:"",ext:"tpl",head:"data-"};var n=function(e,t,n){var r={},i={};var s=Array.prototype,o=s.slice,u=s.forEach;var a={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var f in a)a[a[f]]=f;var l=/\\|'|\r|\n|\t|\u2028|\u2029/g,c=/\\(\\|'|r|n|t|u2028|u2029)/g,h=/.^/;var p=function(e){return e.replace(c,function(e,t){return a[t]})};var d=r.each=r.forEach=function(e,t,n){if(e==null)return;if(u&&e.forEach===u){e.forEach(t,n)}else if(e.length===+e.length){for(var s=0,o=e.length;s<o;s++){if(s in e&&t.call(n,e[s],s,e)===i)return}}else{for(var a in e){if(r.has(e,a)){if(t.call(n,e[a],a,e)===i)return}}}};r.has=function(e,t){return hasOwnProperty.call(e,t)};r.defaults=function(e){d(o.call(arguments,1),function(t){for(var n in t){if(e[n]==null)e[n]=t[n]}});return e};r.templateSettings={evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g};r.template=function(e,t,n){n=r.defaults(n||{},r.templateSettings);var i="__p+='"+e.replace(l,function(e){return"\\"+a[e]}).replace(n.escape||h,function(e,t){return"'+\n_.escape("+p(t)+")+\n'"}).replace(n.interpolate||h,function(e,t){return"'+\n("+p(t)+")+\n'"}).replace(n.evaluate||h,function(e,t){return"';\n"+p(t)+"\n;__p+='"})+"';\n";if(!n.variable)i="with(obj||{}){\n"+i+"}\n";i="var __p='';"+"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+i+"return __p;\n";var s=new Function(n.variable||"obj","_",i);if(t)return s(t,r);var o=function(e){return s.call(this,e,r)};o.source="function("+(n.variable||"obj")+"){\n"+i+"}";return o};return r.template(e,t,n)};var r=function(e,t,r,i){if(typeof e!="object")throw new Error("VOJS_CRITICAL_ERR: is not an object");if(typeof t!="string")throw new Error("VOJS_CRITICAL_ERR: is not an template selector");if(typeof r!="object")throw new Error("VOJS_CRITICAL_ERR: is not an target selector");var s=$(t);if(s.attr("type")!="text/template")throw new Error("VOJS_CRITICAL_ERR: is not a template tag");var o="VOJS_"+(new Date).getTime();var u=$.extend({viewId:o},i),a=n(s.html(),u);var r=r?$(r):$("body");if(a.indexOf("<script")!=-1)throw new Error("VOJS_CRITICAL_ERR: script tag should not be used");if(r.size()==0)throw new Error("VOJS_CRITICAL_ERR: the target does not exist");return{viewId:o,targetSel:r,tplHtml:a}};var i=function(e,t){function s(e){if(e.value==undefined||e.tagName.toUpperCase()=="BUTTON")return true;return false}function o(){if(!e){if(s(t))r="html";else r="value"}else{if(e.indexOf(".")!=-1){var n=e.split(".");r=n[0];i=n[1]}else{r="css";i=e}}}var n=$(t);var r=0,i="";this.run=function(e){var t={html:function(){if(e)n.html(e);else return n.html()},value:function(){if(e)n.val(e);else return n.val()},css:function(){if(e)n.css(i,e);else return n.css(i)},attr:function(){if(e)n.attr(i,e);else return n.attr(i)}};return t[r]()};o()};var s=function(e){function s(){var e=$(r.root);o(e);a(e);f(e);l(e)}function o(e){e.on("click","["+t.head+"act]",function(e){u("click",e)});e.on("mousedown","["+t.head+"act]",function(e){u("mousedown",e)});e.on("mouseup","["+t.head+"act]",function(e){u("mouseup",e)});e.on("dblclick","["+t.head+"act]",function(e){u("dblclick",e)});e.on("change","["+t.head+"act]",function(e){u("change",e)});e.on("keydown","["+t.head+"act]",function(e){u("keydown",e)});e.on("keyup","["+t.head+"act]",function(e){u("keyup",e)})}function u(e,n){var i=n.currentTarget;var s=c($(i).attr(t.head+"act"));var o=s.func,u=s.key,a=s.type?s.type:"click";if(a==e){if(!u){if(r.act[o]){r.act[o].call(r,n)}else{}}else{if(r.act[o]){r.act[o].call(r,n,u)}else{}}}}function a(e){var n=[],r=[];var i=e.find("["+t.head+"bind]");i.each(function(e){var s=$(this),o=s.attr(t.head+"bind"),u=h(o);var a=u.length>0?u:[u];for(var f=0,l=a.length;f<l;f++){var c=a[f];if(!c.key){r.push({name:c.func,elem:this})}else{n.push({func:c.func,key:c.key,data:s.get(0)})}}if(i.size()==e+1){v(n);d(r)}})}function f(e){var n=[];var i=e.find("["+t.head+"tag],[id]");i.each(function(e){var s=$(this),o=false,u=s.attr(t.head+"tag"),a=c(u);if(a.type){throw new Error("VOJS_TAG_ERR: invalid expression")}if(typeof u!="string"){u=this.id;o=true}if(u.indexOf(":")==-1||o){r.tag[u]=s.get(0)}else{n.push({func:a.func,key:a.key,data:s.get(0)})}if(i.size()==e+1){for(var e=0,f=n.length;e<f;e++){if(!r.tag[n[e].func]){r.tag[n[e].func]=new Object}r.tag[n[e].func][n[e].key]=n[e].data}}})}function l(e){$("body").find("script[type*=template]").each(function(i){var s=$(this).attr(t.head+"tpl"),o="body",u="";if(!s)return;if(s.indexOf(":")==-1){u=s}else{var l=s.split(":"),o=l[0],u=l[1]}var c=$(o).find("["+t.head+"tpl="+u+"]").not("script"),h=$(this).html();var p=function(){var t=c,r=arguments[0];if(typeof r=="string"){t=e.find(arguments[0]);r=typeof arguments[1]=="object"?arguments[1]:{}}t.html(n(h,r));a(t);f(t);return t.get(0)};r.tpl[u]=p})}function c(e){var t=null,n=null,r=null;if(e){if(e.indexOf("#")!=-1){var i=e.split("#");r=i[1],e=i[0]}if(e.indexOf(":")!=-1){var i=e.split(":");t=i[1],n=i[0]}else{n=e}}return{key:t,func:n,type:r}}function h(e){if(e.indexOf(",")!=-1){var t=e.split(","),n=new Array;for(var r=0,i=t.length;r<i;r++){n.push(c(t[r]))}return n}return c(e)}function p(e,n,r){var s=$(n).attr(t.head+"bind"),o=h(s),u=o.length>0?o:[o];for(var a=0,f=u.length;a<f;a++){var l=u[a];if(l.func==e){(new i(l.type,n)).run(r)}}}function d(e){var t=new Object;for(var n=0,i=e.length;n<i;n++){var s=e[n];if(!t[s.name])t[s.name]=[];t[s.name].push(s.elem)}for(var o in t){(function(e){r.bindMultiProc=function(n){var r=t[e];for(var i=0,s=r.length;i<s;i++){var o=r[i];p(e,o,n)}return r.length>1?r:r[0]}})(o);r.bind[o]=r.bindMultiProc}}function v(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].func;(function(t){r.funcMultiProc=function(n,r){var i=s(e,t,n);p(t,i,r);return i}})(i);function s(e,t,n){for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s.func==t&&s.key==n){return s.data}}}r.bind[i]=r.funcMultiProc}}function m(e,n,r){function u(e){return(new i(e.cmd.type,e.elem)).run()}var s="["+t.head+e+"]"+(e=="tag"?",#"+n:""),o=[];$(s).each(function(r){var i=$(this).attr(t.head+e);if(e=="tag"&&!i)i=this.id;var s=c(i);if(n==s.func){o.push({cmd:s,elem:this})}});return function(e){if(e.length==1&&!e[0].cmd.key){if(r)return e[0].elem;else return u(e[0])}else{var t=new Object,i=0;for(var s=0,o=e.length;s<o;s++){var a=e[s].cmd;if(a.key){n=a.key}else{n=i;i++}if(r)t[n]=e[s].elem;else t[n]=u(e[s])}return t}}(o)}var r=this;r.root=$(e).get(0),r.act={},r.bind={},r.tag={},r.tpl={};r.bind.get=function(e){return m("bind",e,true)};r.tag.get=function(e){return m("tag",e,true)};r.act.get=function(e){return m("act",e,true)};r.bind.val=function(e){return m("bind",e,false)};r.tag.val=function(e){return m("tag",e,false)};r.act.val=function(e){return m("act",e,false)};r.destroy=function(){$(r.root).off().remove();r.close(true)};r.close=function(e){if(!e)$(r.root).off();for(var t in this){delete this[t]}};s()};$.fn.applyVo=function(e){if(typeof e=="function"){e($.extend({},new s(this)))}else{if(typeof e!="object")throw new Error("VOJS_CRITICAL_ERR: is not an object");if($(this).size()>1)throw new Error("VOJS_CRITICAL_ERR: is not single element");$.extend(e,new s(this))}return this};$.fn.appendVo=function(e,t,n){var i=r(e,t,this,n);i.targetSel.append(i.tplHtml);$("#"+i.viewId).applyVo(e);return this};$.fn.prependVo=function(e,t,n){var i=r(e,t,this,n);i.targetSel.append(i.tplHtml);$("#"+i.viewId).applyVo(e);return this};$.fn.includeVo=function(){var e=this;for(var n=0,r=arguments.length;n<r;n++){var i=arguments[n],s="";if(typeof i=="string"){s=t.path+"/"+i+"."+t.ext;$.ajax({url:s,method:"GET",async:false,success:function(t){$(e).append(t)}})}}};s.setting=function(e){t=$.extend(t,e)};s.template=function(e,t,r){return n(e,t,r)};e.vo=s})(window)