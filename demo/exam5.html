<!DOCTYPE HTML>
<html>
<head>
<script src="../core/jquery-min.js"></script>
<script src="../core/underscore-min.js"></script>
<script src="../vo.js"></script>

<link rel="stylesheet" href="http://static.inpost.kr/lib/bootstrap/2.1.1/css/bootstrap.min.css" />
<script src="http://static.inpost.kr/lib/bootstrap/2.1.1/js/bootstrap.min.js"></script>

<script>
Array.prototype.left = function() {
	if(this.length > 1) {
		var data = this.shift();
		this.push(data);
	}

	return data;
};

Array.prototype.right = function() {
	if(this.length > 1) {
		var tmpList = new Array();
		tmpList.push(this[this.length - 1]);
		tmpList.push(this[0]);

		for(var i = 1; i < this.length - 1; i++) {
			tmpList.push(this[i]);
		}

		for(var j = 0; j < this.length; j++) {
			this[j] = tmpList[j];
		}

		return this[0];
	}
};

var Carousel = function(id) {
	vo.applyTo(this, id);
	
	var root = this.root,
		tag = this.tag,
		act = this.act,
		bind = this.bind;
	
	var elemList = new Array(),
		sliderX = 0,	// 현재 슬라이더 위치
		w = 370,		// 슬라이더 이미지 가로크기
		h = 311;		// 슬라이더 이미지 세로크기

	function move(type) {
		var mPixel = (w / 10);

		if(type > 0) sliderX += mPixel;
		else sliderX -= mPixel;
		
		// 슬라이더 이동
		bind.slider(sliderX + "px");
		
		setTimeout(function() {
			if(sliderX != 0 && sliderX != -w) {
				move(type);
			}
		}, mPixel);
	};

	function init() {
		$(tag.slider).find("img").each(function(i) {
			$(this).width(w).height(h).css({ "float": "left" });
	
			elemList.push(this);
		});
		
		$(tag.slider).width(w * elemList.length).height(h);
		$(tag.container).width(w).height(h).css({ "overflow": "hidden", "position": "relative" });
	}
	
	act.prev = function(e) {
		var elem = elemList.right();
		sliderX = -w;

		$(tag.slider).prepend($(elem).clone()).find("img:last").remove();
		
		move(1);
		e.preventDefault();
	};

	act.next = function(e) {
		var elem = elemList.left();
		sliderX = 0;

		$(tag.slider).append($(elem).clone()).find("img:first").remove();
		move(-1);
		
		e.preventDefault();
	};

	init();
};

$(function() {
	new Carousel("slider");
});
</script>

</head>
<body>
<ul id="slider" class="thumbnails">
	<li class="span5">
		<div class="thumbnail">
			<div data-tag="container">    
				<div data-bind="slider#margin-left" data-tag="slider">
					<img src="http://ftp.inpost.kr/static/wftp/image/thumbstrip13.jpg">
					<img src="http://ftp.inpost.kr/static/wftp/image/thumbstrip04.jpg">
					<img src="http://ftp.inpost.kr/static/wftp/image/thumbstrip15.jpg">
				</div>
			</div>
			<div class="caption">
				<h3>Description</h3>
				<p>
					Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.
				</p>
				<p>
					<a href="#" class="btn" data-act="prev">Prev</a>
					<a href="#" class="btn" data-act="next">Next</a>
				</p>
			</div>
		</div>
	</li>
</ul>
</body>
</html>